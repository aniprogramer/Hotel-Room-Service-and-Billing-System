<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/header') %>
    <title>Record Payment | Hotel Billing</title>
  </head>
  <body class="bg-light">
    <%- include('../partials/navbar', { user, active: 'invoices' }) %>

    <div class="container py-5">
      <div class="card shadow border-0 mx-auto" style="max-width: 650px;">
        <div class="card-body">
          <h4 class="fw-bold text-center text-primary mb-4">ðŸ’µ Record Payment</h4>

          <div class="row mb-3">
            <div class="col-md-6">
              <p><strong>Invoice No:</strong> <%= invoice.invoice_number %></p>
              <p><strong>Invoice ID:</strong> <%= invoice.invoice_id %></p>
            </div>
            <div class="col-md-6 text-end">
              <p><strong>Total Amount:</strong> â‚¹<%= Number(invoice.total_amount).toFixed(2) %></p>
              <p>
                <strong>Status:</strong>
                <span class="badge bg-<%= invoice.paid ? 'success' : 'danger' %>">
                  <%= invoice.paid ? 'Paid' : 'Unpaid' %>
                </span>
              </p>
            </div>
          </div>

          <% if (invoice.paid) { %>
            <div class="alert alert-success text-center">
              âœ… This invoice is already paid.
            </div>
            <div class="text-center mt-3">
              <a href="/billing/invoices" class="btn btn-outline-primary">Back to Invoices</a>
            </div>
          <% } else { %>
            <form action="/billing/pay/<%= invoice.invoice_id %>" method="POST" class="mt-3">
              <div class="mb-3">
                <label class="form-label fw-semibold">Payment Amount (â‚¹)</label>
                <input type="number" name="amount" value="<%= Number(invoice.total_amount).toFixed(2) %>" class="form-control" required />
              </div>

              <div class="mb-3">
                <label class="form-label fw-semibold">Payment Method</label>
                <select name="method" class="form-select" required>
                  <option value="">Select Method</option>
                  <option value="CASH">Cash</option>
                  <option value="CARD">Card</option>
                  <option value="UPI">UPI</option>
                </select>
              </div>

              <div class="text-center mt-4">
                <button type="submit" class="btn btn-success px-5">Confirm Payment</button>
                <a href="/billing/invoices" class="btn btn-outline-secondary ms-2">Cancel</a>
              </div>
            </form>
          <% } %>
        </div>
      </div>
    </div>

    <%- include('../partials/footer') %>
  </body>
</html>
